(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},1:function(t,e,a){t.exports=a("cd49")},1182:function(t,e,a){},1872:function(t,e,a){"use strict";var s=a("8161"),r=a.n(s);r.a},1961:function(t,e,a){},"1e3e":function(t,e,a){},2:function(t,e){},2203:function(t,e,a){"use strict";var s=a("8e60"),r=a.n(s);r.a},"2c15":function(t,e,a){"use strict";var s=a("b097"),r=a.n(s);r.a},3:function(t,e){},"34ba":function(t,e,a){"use strict";var s=a("1182"),r=a.n(s);r.a},"42f4":function(t,e){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609e","./ky.js":"9609e","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d46","./pt-br.js":"d2d46","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=n,t.exports=r,r.id="4678"},5219:function(t,e,a){"use strict";var s=a("c460"),r=a.n(s);r.a},"5b99":function(t,e,a){},"7da1":function(t,e,a){"use strict";var s=a("5b99"),r=a.n(s);r.a},8161:function(t,e,a){},"85ec":function(t,e,a){},"8e60":function(t,e,a){},b097:function(t,e,a){},b936:function(t,e,a){"use strict";var s=a("1961"),r=a.n(s);r.a},bf3b:function(t,e,a){"use strict";var s=a("1e3e"),r=a.n(s);r.a},c460:function(t,e,a){},c7a2:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-config-provider",{attrs:{locale:t.locale}},[a("div",{attrs:{id:"app"}},[t.isLogin?a("div",{staticClass:"container",staticStyle:{height:"100% !important",width:"100%!important"}},[a("router-view")],1):t._e(),t.isLogin?t._e():a("div",[a("div",{staticClass:"wrapper"},[a("nav",{attrs:{id:"sidebar"}},[a("div",{staticClass:"sidebar-header"},[a("h4",{staticClass:"custom-h5"},[t._v("¡Bienvenido(a) a TimeWorks, "+t._s(t.userName)+" !")])]),a("side-bar")],1),a("div",{attrs:{id:"content"}},[a("nav-bar"),a("banner"),a("div",{staticClass:"container"},[a("back-to-top",{attrs:{bottom:"25px",right:"50px"}},[a("img",{attrs:{src:"/images/volver_arriba.png",alt:""}})]),a("router-view")],1)],1)])])])])},n=[],i=(a("b0c0"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),o=a("d4ec"),c=a("bee2"),l=a("262e"),u=a("2caf"),d=a("9ab4"),p=a("96d0"),h=a("60a3"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{attrs:{id:"sidebar-menu"}},[a("li",[a("button",{staticClass:"btn btn-block btn-lg btn-outline-secondary",attrs:{type:"button"},on:{click:t.goToHome}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/Google Calendar.png"}}),t._v(" Importación de Google Calendar ")])]),a("li",[a("button",{staticClass:"btn btn-block btn-lg btn-outline-secondary",attrs:{type:"button"},on:{click:t.goToQuery}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/Consulta de registros.png"}}),t._v(" Consulta de registros cerrados ")])]),a("li",[2==t.userName?a("button",{staticClass:"btn btn-block btn-lg btn-outline-secondary",attrs:{type:"button"},on:{click:t.goToGeneralRegisters}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/administracion.png"}}),t._v(" Administración ")]):t._e()]),a("li",[2==t.userName?a("button",{staticClass:"btn btn-block btn-lg btn-outline-secondary",attrs:{type:"button"},on:{click:t.goToReportsGeneration}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/generacion_reportes.png"}}),t._v(" Generación de reportes ")]):t._e()])]),t._m(0)])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[a("a",{staticStyle:{color:"grey"},attrs:{href:"/use-policy"}},[t._v("Política y manual de uso")])])}],f=(a("7db0"),a("2f62")),g=a("bc3a"),b=a.n(g),_={api:{domain:"https://api-timeworks.c-230.com"}};b.a.defaults.url=_.api.domain,s["default"].use(f["a"]);var y=new f["a"].Store({state:{user:null,auth:!1,controlMenu:!1,data:[],agreedToPrivacy:!1},mutations:{SET_USER:function(t,e){t.user=e,t.auth=Boolean(e)},BUTTON_DISPLAY:function(t){t.controlMenu=!0},SET_DATA:function(t,e){t.data=e},INITIAL_STORE:function(t){localStorage.getItem("agreedToPrivacy")&&(t.agreedToPrivacy="true"==localStorage.getItem("agreedToPrivacy"))},ACCEPT_PRIVACY:function(t,e){localStorage.setItem("agreedToPrivacy",e),t.agreedToPrivacy=e}},actions:{logout:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,e.next=3,b.a.post("/api/logout");case 3:return localStorage.removeItem("acess_token"),localStorage.removeItem("use_policy_check"),e.abrupt("return",a("getUser"));case 6:case"end":return e.stop()}}),e)})))()},login:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.dispatch,console.log("credentials"),a.next=4,b.a.post("/api/login",e);case 4:return r=a.sent,r.data.token?localStorage.setItem("acess_token",r.data.token):console.error("login access error"),a.abrupt("return",s("getUser"));case 7:case"end":return a.stop()}}),a)})))()},getUser:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,b.a.get("/api/user");case 4:s=e.sent,a("SET_USER",s.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),a("SET_USER",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},displayButton:function(t){var e=t.commit;e("BUTTON_DISPLAY")}},modules:{}}),k=a("ed3b"),j=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.userName="",t.disabledMenu=!1,t.showAdministrationMenu=!1,t.administrationUsers=["jcastillo@c-230.com","mmartinez@c-230.com","igomez@c-230.com","cagurto@c-230.com","hmedina@c-230.com","sjacinto@c-230.com"],t}return Object(c["a"])(a,[{key:"checkIfUserCanSeeAdministratorMenu",value:function(){var t=y.state.user;if(null!==t){var e=t.email,a=this.administrationUsers.find((function(t){return t==e}));if(a)return!0}return!1}},{key:"checkPermissionPolicy",value:function(){return this.disabledMenu=this.$store.state.agreedToPrivacy,this.disabledMenu||this.messagePolicy(),this.disabledMenu}},{key:"messagePolicy",value:function(){var t=k["a"].info;t({title:"Debe aceptar las políticas de uso para continuar.",content:"",okText:"Continuar"})}},{key:"goToMonthlyReport",value:function(){if(!this.checkPermissionPolicy())return!0;this["$router"].replace("/monthly-report-user")}},{key:"goToGeneralRegisters",value:function(){if(!this.checkPermissionPolicy())return!0;this["$router"].replace("/administration")}},{key:"goToReportsGeneration",value:function(){if(!this.checkPermissionPolicy())return!0;this["$router"].replace("/reports-generation")}},{key:"goToHome",value:function(){if(!this.checkPermissionPolicy())return!0;this["$router"].replace("/home")}},{key:"goToQuery",value:function(){if(!this.checkPermissionPolicy())return!0;this["$router"].replace("/query-user")}}]),a}(h["d"]);j=Object(d["a"])([h["a"]],j);var C=j,w=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this["$store"].dispatch("getUser").then((function(){e.userName=e["$store"].state.user.role_time_id}));case 2:this.showAdministrationMenu=this.checkIfUserCanSeeAdministratorMenu();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(Object(h["b"])(C));w=Object(d["a"])([h["a"]],w);var x=w,O=x,S=(a("1872"),a("2877")),R=Object(S["a"])(O,v,m,!1,null,null,null),D=R.exports,E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},T=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"left-sidebar"},[a("div",{staticClass:"yellow-div"}),a("div",{staticClass:"orange-div"}),a("div",{staticClass:"blue-div"}),a("div",{staticClass:"scroll-sidebar"})])}],P=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"created",value:function(){console.log("Se creo navbar")}}]),a}(h["d"]);P=Object(d["a"])([h["a"]],P);var M=P,Y=M,A=(a("e309"),Object(S["a"])(Y,E,T,!1,null,null,null)),I=A.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar-new"},[a("ul",{staticClass:"nav-links"},[a("input",{attrs:{type:"checkbox",id:"checkbox_toggle"}}),a("label",{staticClass:"bars",attrs:{for:"checkbox_toggle"}},[t._v("☰")]),a("div",{staticClass:"menu"},[a("li",[a("button",{staticClass:"btn btn-contents btn-lg btn-outline-secondary nav-button",attrs:{type:"button"},on:{click:t.goToHome}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/Google Calendar.png"}}),t._v(" Importación de Google Calendar ")])]),a("li",[a("button",{staticClass:"btn btn-contents nav-button btn-lg btn-outline-secondary nav-button",attrs:{type:"button"},on:{click:t.goToMonthlyReport}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/Cierre del informe.png"}}),t._v(" Envío de informe mensual ")])]),a("li",[a("button",{staticClass:"btn btn-contents btn-lg btn-outline-secondary nav-button",attrs:{type:"button"},on:{click:t.goToQuery}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/Consulta de registros.png"}}),t._v(" Consulta de registros previos ")])]),2==t.userName?a("li",[a("button",{staticClass:"btn btn-contents btn-lg btn-outline-secondary nav-button",attrs:{type:"button"},on:{click:t.goToGeneralRegisters}},[a("img",{staticClass:"icon-menu",attrs:{src:"assets/images/administracion.png"}}),t._v(" Administración ")])]):t._e(),a("div",{staticClass:"footer-nav"},[a("a",{staticStyle:{color:"grey","font-size":"0.7em"},attrs:{href:"/use-policy"}},[t._v("Política y manual de uso")]),a("button",{staticClass:"btn btn-sm btn-outline-warning",attrs:{type:"button"},on:{click:t.logout}},[t._v("Cerrar Sesión")])])])]),a("img",{staticStyle:{"max-width":"20%"},attrs:{src:"assets/images/LOGO BLANCO.png"}})]),a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark navbar-desktop",attrs:{id:"navbar-fixed"}},[a("div",{staticClass:"row container-fluid"},[t._m(0),a("div",{staticClass:"col text-right"},[a("button",{staticClass:"btn btn-sm btn-outline-warning",attrs:{type:"button"},on:{click:t.logout}},[t._v("Cerrar Sesión")])])])])])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("span",[a("img",{staticStyle:{"max-width":"20%"},attrs:{src:"assets/images/LOGO BLANCO.png"}})])])}],z=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"logout",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this["$store"].dispatch("logout");case 2:this["$router"].replace("/login");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this["$store"].dispatch("getUser").then((function(){e.userName=e["$store"].state.user.role_time_id}));case 2:this.showAdministrationMenu=this.checkIfUserCanSeeAdministratorMenu();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(Object(h["b"])(C));z=Object(d["a"])([h["a"]],z);var F=z,B=F,L=(a("34ba"),Object(S["a"])(B,N,$,!1,null,null,null)),H=L.exports,U=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg",attrs:{id:"navbar-image"}},[a("div",{staticClass:"container-fluid"})])}],q=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.userName="",t}return Object(c["a"])(a,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this["$store"].dispatch("getUser").then((function(){e.userName=e["$store"].state.user.name}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(h["d"]);q=Object(d["a"])([h["a"]],q);var G=q,J=G,Q=Object(S["a"])(J,U,W,!1,null,"7b885778",null),V=Q.exports,K=a("6afc"),X=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.config={size:30,bottom:50,src:"/images/volver_arriba.png",bgColor:"transparent"},t.userName="",t.locale=p["a"],t}return Object(c["a"])(a,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this["$store"].dispatch("getUser").then((function(){e.userName=e["$store"].state.user.name.replace(/ .*/,"")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){console.log(p["a"])}},{key:"beforeCreate",value:function(){this.$store.commit("INITIAL_STORE")}},{key:"isLogin",get:function(){var t=this["$route"].fullPath;return"/login"===t}}]),a}(h["d"]);X=Object(d["a"])([Object(h["a"])({components:{Banner:V,NavBar:H,SideBar:D,SideBarDecorator:I,BackToTop:K["a"]}})],X);var Z=X,tt=Z,et=(a("034f"),Object(S["a"])(tt,r,n,!1,null,null,null)),at=et.exports,st=a("8c4f"),rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card p-2"},[a("div",{staticClass:"card-body card-shadow"},[a("div",{staticClass:"row pl-4 pr-4"},[a("div",{staticClass:"col-md-4 p-0 m-0"},[a("div",{class:t.getClase(1)},[a("p",{staticClass:"pl-4"},[t.steps>1?a("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "+t._s(t.steps>1?"":"1. ")+" Importación de calendarios ")])])]),a("div",{staticClass:"col-md-4  m-0"},[a("div",{class:t.getClase(2)},[a("p",{staticClass:"pl-4"},[t.steps>2?a("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "+t._s(t.steps>2?"":"2. ")+" Vista previa del reporte ")])])]),a("div",{staticClass:"col-md-4 p-0 m-0"},[a("div",{class:t.getClase(3)},[a("p",{staticClass:"pl-4"},[t.steps>3?a("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "+t._s(t.steps>3?"":"3. ")+" Cierre del informe mensual ")])])])]),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-12"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.steps,expression:"steps === 1"}]},[a("div",{staticClass:"row pl-4"},[a("p",{staticClass:"paragraphs"},[t._v(" Para generar un informe completo, selecciona las fechas de inicio y fin del mes requerido (sin distinguir fin de semana o feriados). Para generar un reporte parcial, selecciona el rango de fechas deseado. Finalmente, agrega el calendario o calendarios deseados y click en el botón “Continuar” ")]),a("a-range-picker",{on:{change:t.dateRangeChanged}}),a("br"),a("br")],1),a("div",{staticClass:"row pl-4 mt-2"},[t.isLoading?a("rotate-square2"):t._e(),t.isLoading?t._e():a("button",{staticClass:"btn btn-outline-success btn-sm actions-button",attrs:{type:"button"},on:{click:t.importCalendar}},[t._v("Añadir Calendario")])],1),t._l(t.dataGrouped,(function(e,s){return a("div",{key:s,staticClass:"row mt-4 pt-4 border pl-4"},[a("div",{staticClass:"col-md-6"},[a("h6",[t._v(" Calendario "+t._s(s+1)+" "),a("strong",[t._v(t._s(e.email))])])]),a("div",{staticClass:"col-md-6 text-right"},[a("a",{staticClass:"text-danger",on:{click:function(e){return t.removeCalendar(s)}}},[t._v("Eliminar calendario "),a("i",{staticClass:"ti-close"})])]),a("div",{staticClass:"col-12"},[a("table",{staticClass:"table table-bordered table-responsive"},[t._m(0,!0),a("tbody",[t._l(e.items,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.project))]),a("td",[t._v(t._s(e.detail))]),a("td",[t._v(t._s(e.dateStart)+" - "+t._s(e.dateEnd))]),a("td",[t._v(t._s(e.hours)+" Horas")])])})),a("tr",[a("td",{staticStyle:{"text-align":"right","padding-right":"20px"},attrs:{colspan:"5"}},[a("h6",[t._v("Subtotal de horas: "+t._s(e.total)+" hrs.")])])])],2)])])])})),t.dataGrouped.length>0?a("div",{staticClass:"row mt-2"},[a("h5",{staticStyle:{"text-align":"right",width:"100%",padding:"20px"}},[t._v("Total de horas: "+t._s(t.totalHours))])]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showButtonExport,expression:"showButtonExport"}],staticClass:"row mt-2"},[a("button",{staticClass:"btn btn-success",on:{click:t.dataExport}},[t._v(" Exportar ")])]),a("div",{staticClass:"row mt-2 mr-4 text-right justify-content-end"},[t.dataGrouped.length?a("button",{staticClass:"btn btn-purple",on:{click:t.continuar}},[t._v("Continuar "),a("i",{staticClass:"fa fa-arrow-right"})]):t._e()])],2),2===t.steps?a("div",[a("monthly-report-user",{on:{continueToNext:t.continueToNext}}),a("div",{staticClass:"flex"},[a("button",{staticClass:"btn btn-purple",on:{click:t.regresar}},[a("i",{staticClass:"fa fa-arrow-left"}),t._v(" Regresar ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.continueToEnd,expression:"continueToEnd"}],staticClass:"btn btn-purple",on:{click:t.continuar}},[t._v(" Continuar "),a("i",{staticClass:"fa fa-arrow-right"})])])],1):t._e(),3===t.steps?a("div",[a("monthly-closure"),a("div",{staticClass:"row pl-4 pr-4"},[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkForSending,expression:"checkForSending"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"},domProps:{checked:Array.isArray(t.checkForSending)?t._i(t.checkForSending,null)>-1:t.checkForSending},on:{change:function(e){var a=t.checkForSending,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.checkForSending=a.concat([n])):i>-1&&(t.checkForSending=a.slice(0,i).concat(a.slice(i+1)))}else t.checkForSending=r}}}),t._m(1)])]),a("div",{staticClass:"flex"},[a("button",{staticClass:"btn btn-purple",on:{click:t.regresar}},[a("i",{staticClass:"fa fa-arrow-left"}),t._v(" Regresar ")]),t.isLoading?a("rotate-square2"):a("button",{staticClass:"btn btn-purple",on:{click:t.storeRegisters}},[t._v("Enviar informe "),a("i",{staticClass:"fa fa-paper-plane"})])],1)],1):t._e()])])])])])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Codigo de proyecto")]),a("th",{attrs:{scope:"col"}},[t._v("Detalle")]),a("th",{attrs:{scope:"col"}},[t._v("Fecha de ejecucion")]),a("th",{attrs:{sope:"col"}},[t._v("Tiempo destinado")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"custom-control-label check-policy",attrs:{for:"customCheck1"}},[a("strong",{staticStyle:{"font-size":"1.1em"}},[t._v("Manifiesto que las actividades y tiempos registrados en mis calendarios e importados en esta aplicación son consistentes con lo realizado durante el período que se reporta")])])}],it=(a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("13d5"),a("a434"),a("4fad"),a("d3b7"),a("498a"),a("159b"),a("7f45")),ot=a.n(it),ct=a("d58b"),lt=a("8f99"),ut=a.n(lt),dt=a("1146"),pt=a.n(dt),ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row p-3"},[a("p",{staticClass:"paragraphs"},[t._v(" En la siguiente tabla puedes revisar los registros importados en desglose por semana y por día. Si aplica, una advertencia señalará las semanas donde es necesario hacer correcciones (click en “Regresar” para volver a importar calendarios). En caso de que la sumatoria por semana sea correcta, hacer click en “Continuar” ")]),a("table",{staticClass:"table table-responsive"},[t._m(0),a("tbody",[t._l(t.dataWeek,(function(e,s){return[a("tr",{key:s},[a("td",[a("strong",[t._v(t._s(e.weekNumber))]),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.dataWeek[s].open,expression:"!dataWeek[index].open"}],staticClass:"btn btn-sm",staticStyle:{"background-color":"transparent !important"},on:{click:function(e){t.dataWeek[s].open=!0}}},[a("i",{staticClass:"fa fa-angle-down"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].open,expression:"dataWeek[index].open"}],staticClass:"btn btn-sm",staticStyle:{"background-color":"transparent !important"},on:{click:function(e){t.dataWeek[s].open=!1}}},[a("i",{staticClass:"fa fa-angle-up"})])]),a("td",[a("strong",[t._v(t._s(e.startWeek)+" - "+t._s(e.endWeek))])]),a("td"),a("td"),a("td"),a("td"),a("td",[a("strong",[t._v(t._s(e.total))]),Number(e.total)!=Number(e.hoursRequired)?a("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"orangered","font-size":"1.5em","padding-left":"10px"},attrs:{"aria-hidden":"true"}}):a("i",{staticClass:"fa fa-check-circle",staticStyle:{color:"green","font-size":"1.5em","padding-left":"10px"},attrs:{"aria-hidden":"true"}})])]),t._l(e.data,(function(e,r){return a("tr",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].open,expression:"dataWeek[index].open"}],key:r+"-"+s},[a("td"),a("td",[t._v(" "+t._s(t.formatDay(e.day))+" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.dataWeek[s].data[r].open,expression:"!dataWeek[index].data[j].open"}],staticClass:"btn btn-sm",staticStyle:{"background-color":"transparent !important"},on:{click:function(e){t.dataWeek[s].data[r].open=!0}}},[a("i",{staticClass:"fa fa-angle-down"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].data[r].open,expression:"dataWeek[index].data[j].open"}],staticClass:"btn btn-sm",staticStyle:{"background-color":"transparent !important"},on:{click:function(e){t.dataWeek[s].data[r].open=!1}}},[a("i",{staticClass:"fa fa-angle-up"})])]),a("td",t._l(e.data,(function(e,n){return a("p",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].data[r].open,expression:"dataWeek[index].data[j].open"}],key:n},[t._v(" "+t._s(t.formatHour(e))+" ")])})),0),a("td",t._l(e.data,(function(e,n){return a("p",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].data[r].open,expression:"dataWeek[index].data[j].open"}],key:n},[t._v(" "+t._s(e.detail)+" ")])})),0),a("td",t._l(e.data,(function(e,n){return a("p",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].data[r].open,expression:"dataWeek[index].data[j].open"}],key:n},[t._v(" "+t._s(e.project)+" ")])})),0),a("td",t._l(e.data,(function(e,n){return a("p",{directives:[{name:"show",rawName:"v-show",value:t.dataWeek[s].data[r].open,expression:"dataWeek[index].data[j].open"}],key:n},[t._v(" "+t._s(e.email)+" ")])})),0),a("td",[t._v(t._s(e.total))])])}))]}))],2)])])},vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{"background-color":"#f1f5f7"}},[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Semana")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Fecha")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hora")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Detalle")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Codigo")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Mail")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Tiempo")])])])}],mt=(a("c740"),a("a9e3"),a("35b3"),a("c1df")),ft=a.n(mt),gt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.data=null,t.totalHours=null,t.dates=null,t.year=null,t.month=null,t.finished=!1,t.isLoading=!1,t.defaultHoursByDay=8,t.dataWeek=[],t.hoursRequiredByUsers=[{email:"aparrodi@c-230.com",hours:8},{email:"dpreston@c-230.com",hours:2},{email:"sgomez@supernovalabs.tech",hours:4},{email:"sjacinto@c-230.com",hours:8},{email:"abenitez@c-230.com",hours:5.6},{email:"ana.lopez@c-230.com",hours:4},{email:"j.otero@c-230.com",hours:6},{email:"dhernandez@c-230.com",hours:8},{email:"iflores@c-230.com",hours:8},{email:"daldaco@c-230.com",hours:8}],t}return Object(c["a"])(a,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.data=this.$store.state.data,e=this.getHoursDailyByEmail(),0!=this.data.length){t.next=5;break}return this.showAlert("Necesitas importar eventos de tu calendario para continuar"),t.abrupt("return");case 5:return a=ft()(this.data[0].dateEnd,"DD/MM/YYYY").format("YYYY-MM-DD"),t.prev=6,t.next=9,b.a.post("/api/weeks-days",{date:a});case 9:s=t.sent,r=[],console.log(s.data),s.data.data.forEach((function(t,e){r.push({weekNumber:e,data:t,total:0,open:!1})})),this.data.forEach((function(t){var a=ft()(t.dateStart,"DD/MM/YYYY HH:mm"),s=r.findIndex((function(t,s){var n=ft()(t.data[0].day).subtract(1,"days"),i=ft()(t.data[t.data.length-1].day).add(1,"days"),o=(i.diff(n,"days")-1)*e;o=Math.round(100*(o+Number.EPSILON))/100,r[s].hoursRequired=o;var c=a.isAfter(n)&&a.isBefore(i);return r[s].startWeek=ft()(t.data[0].day).format("DD/MM/YYYY"),r[s].endWeek=ft()(t.data[t.data.length-1].day).format("DD/MM/YYYY"),c}));if(-1!==s){var n=r[s].data,i=n.findIndex((function(t){return a.format("YYYY-MM-DD")==t.day}));-1!==i&&r[s].data[i].data.push(t)}})),r.forEach((function(t,e){t.data.forEach((function(t,a){r[e].data[a].total=ut()(t.data).sum("hours")})),r[e].total=ut()(r[e].data).sum("total"),r[e].weekNumber+=1})),this.dataWeek=r,n=this.dataWeek.findIndex((function(t){return t.hoursRequired!=t.total})),-1!==n?(this.showAlert("Alguna(s) semana(s) no cumple(n) con la sumatoria de horas definida."),this.$emit("continueToNext",!1)):this.$emit("continueToNext",!0),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](6),console.error(t.t0);case 23:case"end":return t.stop()}}),t,this,[[6,20]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"formatDay",value:function(t){return ft()(t).format("DD/MM/YYYY")}},{key:"formatHour",value:function(t){return ft()(t.dateStart,"DD/MM/YYYY HH:mm").format("HH:mm")+"-"+ft()(t.dateEnd,"DD/MM/YYYY HH:mm").format("HH:mm")}},{key:"showAlert",value:function(t){var e=k["a"].info;e({title:t,content:"",okText:"Aceptar"})}},{key:"getHoursDailyByEmail",value:function(){var t=y.state.user;if(null!==t){var e=t.email,a=this.hoursRequiredByUsers.find((function(t){return t.email==e}));if(a)return a.hours}return this.defaultHoursByDay}},{key:"getMonthSpanishName",value:function(t){var e=[{en:"January",es:"Enero"},{en:"February",es:"Febrero"},{en:"March",es:"Marzo"},{en:"April",es:"Abril"},{en:"May",es:"Mayo"},{en:"June",es:"Junio"},{en:"July",es:"Julio"},{en:"August",es:"Agosto"},{en:"September",es:"Septiembre"},{en:"October",es:"Octubre"},{en:"November",es:"Noviembre"},{en:"December",es:"Diciembre"}],a=e.find((function(e){return e.en==t}));return a?a.es:t}}]),a}(h["d"]);gt=Object(d["a"])([Object(h["a"])({components:{RotateSquare2:ct["a"]}})],gt);var bt=gt,_t=bt,yt=(a("2203"),Object(S["a"])(_t,ht,vt,!1,null,"9e6af936",null)),kt=yt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("p",{staticClass:"paragraphs"},[t._v(" Las siguientes gráficas desglosan los registros importados por categoría y código de proyecto. Si no hay errores o ajustes, validar la consistencia de los registros y enviar reporte. ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row pl-2"},[a("div",{staticClass:"col-md-6"},[t._m(0),a("table",{staticClass:"table table-responsive"},[t._m(1),a("tbody",[t._l(t.charts,(function(e,s){return[a("tr",{key:s},[a("td",[t._v(t._s(e.myOwnTitle))]),a("td",[t._v(t._s(e.totalHoras))]),a("td",[t._v(t._s(e.porcentaje)+"%")])]),a("tr",{key:s+"--a"},[a("td",{attrs:{colspan:"3"}},[a("highcharts",{attrs:{options:e}})],1)])]}))],2)])])])]),a("div",{staticClass:"col-md-6"},[null!=t.chartHorizontal?a("highcharts",{attrs:{options:t.chartHorizontal}}):t._e()],1)])])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Resumen del informec")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Organización")]),a("th",[t._v("Horas")]),a("th",[t._v("Porcentaje")])])])}],wt=(a("b680"),a("25f0"),a("4452")),xt=a.n(wt),Ot=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.data=[],t.isLoading=!1,t.chartOptions=null,t.chartHorizontal=null,t.charts=[],t.options=[],t}return Object(c["a"])(a,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.data=this.$store.state.data,t.next=4,b.a.post("/api/store/temporarily",{data:this.data});case 4:e=t.sent,a=e.data.nowData.map((function(t){return{name:t.name,y:t.percentage,p:t.percentage.toFixed(2)}})).filter((function(t){return t.y>0})),s=[],e.data.nowData.forEach((function(t){t.hours>0&&s.push(t.color)})),r=e.data.monthName+" "+e.data.year,this.chartOptions={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Distribución tiempos, por tipo de actividad"},subtitle:{text:r},tooltip:{pointFormat:"{series.name}: <b>{point.p}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.p} %"}}},series:[{name:"",colorByPoint:!0,data:a}],colors:s},n=[],i=[],e.data.nowData.forEach((function(t){t.codes.forEach((function(a){n.push({name:a.code,y:a.hours,p:parseFloat((Math.round(100*Number(a.hours))/Number(e.data.totalHours)).toString()).toFixed(2)}),i.push(t.color)}))})),this.chartHorizontal={chart:{type:"bar"},title:{text:"Horas y porcentaje de horas por subactividad"},subtitle:{text:r},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category"},yAxis:{title:{text:""}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y} ({point.p}%)"}}},series:[{name:"SubActividades",colorByPoint:!0,data:n}],colors:i},this.crearGraficasPorEmpresa(e.data,r),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"crearGraficasPorEmpresa",value:function(t,e){var a=this;t.dataByOrg.forEach((function(t,s){var r=t.data.map((function(t){return{name:t.reference,y:t.percentage,p:t.percentage.toFixed(2),hours:t.hours}}));if(r.length){var n=0;r.forEach((function(t){n+=t.hours}));var i=t.name,o=n;a.creatPieChart(i,e,r,t.colors,o)}}));var s=0;this.options.forEach((function(t){s+=t.totalHoras})),this.charts=this.options.map((function(t){console.log(t.totalHoras+" *  / "+s);var e=Math.round(100*t.totalHoras/s);return t.porcentaje=e,t}))}},{key:"creatPieChart",value:function(t,e,a,s,r){var n={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",marginTop:0,height:280,width:280},exporting:{enabled:!1},myOwnTitle:t,title:{text:"",style:{display:"none"}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.p} %"}}},series:[{name:"",colorByPoint:!0,data:a}],colors:s,totalHoras:r};this.options.push(n)}}]),a}(h["d"]);Ot=Object(d["a"])([Object(h["a"])({components:{RotateSquare2:ct["a"],highcharts:wt["Chart"]}})],Ot);var St=Ot,Rt=St,Dt=Object(S["a"])(Rt,jt,Ct,!1,null,"368f2835",null),Et=Dt.exports;b.a.defaults.url=_.api.domain;new h["d"]({});var Tt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.CLIENT_ID="438182473804-lold6v82v1m26dht1dr3j58e0tmbjg3g.apps.googleusercontent.com",t.API_KEY="AIzaSyC2eQA62ImF7GlMuscwl26zg2X0_dBkIcY",t.DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],t.SCOPES="https://www.googleapis.com/auth/calendar.readonly",t.checkForSending=!1,t.timeMin=null,t.timeMax=null,t.infoProjects=[],t.infoRepeatedProjects=[],t.isLoading=!1,t.showButtonExport=!1,t.totalHours=0,t.timeMinString="",t.timeMaxString="",t.api=null,t.authorized=!1,t.emailNow=null,t.dataGrouped=[],t.steps=1,t.continueToEnd=!0,t}return Object(c["a"])(a,[{key:"dateRangeChanged",value:function(t){if(t.length>0){var e=ot.a.tz.guess();this.timeMin=ot()(t[0]._d).tz(e).startOf("day").toISOString(),this.timeMax=ot()(t[1]._d).tz(e).endOf("day").toISOString(),this.timeMinString=ot()(t[0]._d).tz(e).endOf("day").format("DD-MM-YYYY"),this.timeMaxString=ot()(t[1]._d).tz(e).endOf("day").format("DD-MM-YYYY");var a=ot()(t[0]._d).tz(e).startOf("month").startOf("day").toISOString(),s=ot()(t[1]._d).tz(e).endOf("month").endOf("day").toISOString();this.showButtonExport=!(this.timeMin==a&&s==this.timeMax)}else this.showButtonExport=!1;console.log(this.showButtonExport)}},{key:"continuar",value:function(){this.steps=this.steps+1}},{key:"getClase",value:function(t){return 1==this.steps&&1==t?"arrow-square":this.steps>1&&1==t?"arrow-green-square":this.steps==t?"arrow":this.steps>t?"arrow-green":"arrow-gray"}},{key:"regresar",value:function(){this.steps=this.steps-1}},{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.api=gapi,t.next=3,this.handleClientLoad();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleClientLoad",value:function(){this.api.load("client:auth2",this.initClient)}},{key:"continueToNext",value:function(t){this.continueToEnd=t}},{key:"initClient",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.client.init({apiKey:this.API_KEY,clientId:this.CLIENT_ID,discoveryDocs:this.DISCOVERY_DOCS,scope:this.SCOPES});case 2:this.api.auth2.getAuthInstance().isSignedIn.listen(this.statusSession),this.statusSession(this.api.auth2.getAuthInstance().isSignedIn.get());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"statusSession",value:function(t){this.authorized=t}},{key:"importCalendar",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.authorized){t.next=3;break}return t.next=3,this.handleSignOutClick();case 3:Promise.resolve(this.api.auth2.getAuthInstance().signIn()).then((function(t){e.authorized=!0,e.getData()}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.api.client.calendar.events.list({calendarId:"primary",timeMin:this.timeMin,timeMax:this.timeMax,showDeleted:!1,singleEvents:!0,orderBy:"startTime",maxResults:2e4});case 3:e=t.sent,this.emailNow=e.result.summary,this.processResult(e.result.items),this.isLoading=!1,this.checkEventsRepeated(this.infoProjects);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSignOutClick",value:function(){Promise.resolve(this.api.auth2.getAuthInstance().signOut())}},{key:"showAlert",value:function(t){var e=k["a"].info;e({title:t,content:"",okText:"Aceptar"})}},{key:"storeRegisters",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.checkForSending){t.next=4;break}return this.showAlert("Antes de enviar, debes aceptar las condiciones"),t.abrupt("return");case 4:return e=this.$store.state.data,t.next=7,b.a.post("/api/check-register-is-same-date",{data:e});case 7:if(a=t.sent,!a.data.exists){t.next=14;break}return t.next=11,this.$swal({title:"Ya tienes registros en esta fecha. ¿Deseas remplazarlos?",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"});case 11:if(s=t.sent,s.isConfirmed){t.next=14;break}return t.abrupt("return",!0);case 14:return this.isLoading=!0,t.next=17,b.a.post("/api/events/store",{data:e});case 17:a=t.sent,r=k["a"].success,r({title:"Tu información se ha guardado correctamente",content:"",okText:"Aceptar"}),this.isLoading=!1,this.steps=1,t.next=30;break;case 24:t.prev=24,t.t0=t["catch"](0),console.log(t.t0),n=k["a"].error,this.isLoading=!1,n({title:"La información no se ha podido guardar, intentelo más tarde",content:"",okText:"Aceptar"});case 30:case"end":return t.stop()}}),t,this,[[0,24]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"dataExport",value:function(){var t=["project","detail","dateStart","dateEnd","hours"],e=pt.a.utils.json_to_sheet(this.infoProjects,{header:t});e["A1"].v="Proyecto",e["B1"].v="Detalle",e["C1"].v="Inicio",e["D1"].v="Fin",e["E1"].v="Horas";var a=this["$store"].state.user.name.replace(/ /g,"_"),s=pt.a.utils.book_new(),r="ReporteParcial_de_".concat(a,"_del_").concat(this.timeMinString,"_al_").concat(this.timeMaxString);pt.a.utils.book_append_sheet(s,e,"tiempo_parcial"),pt.a.writeFile(s,"".concat(r,".xlsx"))}},{key:"checkEventsRepeated",value:function(t){var e=this;if(t.forEach((function(a){var s=ot()(a.dateStart),r=ot()(a.dateEnd),n=t.find((function(t){var e=ot()(t.dateStart),a=ot()(t.dateEnd);return s.isBetween(e,a)||r.isBetween(e,a)}));n&&e.infoRepeatedProjects.push(n)})),this.infoRepeatedProjects.length){var a=k["a"].info;a({title:"Detectamos algunos eventos cruzados",content:"Estos apareceran al final de la tabla",okText:"Aceptar"})}}},{key:"removeCalendar",value:function(t){var e=this.dataGrouped[t].email;this.dataGrouped.splice(t,1),this.infoProjects=this.infoProjects.filter((function(t){return t.email!=e})),this.$store.commit("SET_DATA",this.infoProjects),this.calculateTotalHours()}},{key:"processResult",value:function(t){if(t.length>0)for(var e=0;e<t.length;e++)this.processEvent(t[e]);this.groupedItem(),this.$store.commit("SET_DATA",this.infoProjects),this.calculateTotalHours()}},{key:"calculateTotalHours",value:function(){var t=ut()(this.infoProjects);this.totalHours=this.infoProjects.length?t.sum("hours"):0}},{key:"groupedItem",value:function(){var t="email",e=this.infoProjects.reduce((function(e,a){return(e[a[t]]=e[a[t]]||[]).push(a),e}),{});this.dataGrouped=Object.entries(e).map((function(t){return{email:t[0],items:t[1],total:ut()(t[1]).sum("hours")}}))}},{key:"processEvent",value:function(t){try{var e=/#\w+:.+/;if(e.test(t.summary)){var a={hours:0,dateStart:"",dateEnd:"",project:"",detail:"",email:""},s=!1;if(void 0!==t.organizer.self)if(void 0!==t.attendees&&t.attendees.length){var r=t.attendees.find((function(t){return"accepted"===t.responseStatus&&void 0!=t.self}));r&&(s=!0)}else s=!0;if(s||void 0!==t.attendees&&t.attendees.length&&t.attendees.forEach((function(t){void 0!==t.self&&"accepted"==t.responseStatus&&(s=!0)})),!s)return;var n=t.start.dateTime;n||(n=t.start.date);var i=t.end.dateTime;i||(i=t.end.date);var o=ot()(n),c=ot()(i),l=ot.a.duration(c.diff(o)),u=t.summary.substring(t.summary.indexOf(":")+1),d=t.summary.substring(1,t.summary.indexOf(":"));a.dateStart=o.format("DD/MM/YYYY HH:mm"),a.dateEnd=c.format("DD/MM/YYYY HH:mm"),a.hours=l.asHours(),a.detail=u.trim(),a.project=d.trim(),a.email=this.emailNow,this.infoProjects.push(a)}}catch(p){console.log(p)}}},{key:"getClass",value:function(t){return this.steps==t?"arrow":this.steps>this.steps?"arrow-green":"arrow-gray"}}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],Tt.prototype,"msg",void 0),Tt=Object(d["a"])([Object(h["a"])({components:{MonthlyClosure:Et,MonthlyReportUser:kt,SideBar:D,RotateSquare2:ct["a"]}})],Tt);var Pt=Tt,Mt=Pt,Yt=(a("2c15"),a("42f4")),At=a.n(Yt),It=Object(S["a"])(Mt,rt,nt,!1,null,"27f40b28",null);"function"===typeof At.a&&At()(It);var Nt=It.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center align-items-center",staticStyle:{height:"100%"}},[a("div",{staticClass:"col col-sm-6 col-md-6 col-lg-6 col-xl-6"},[a("form",{staticClass:"p-5",staticStyle:{"background-color":"#e9e9ee","border-radius":"20px"}},[t._m(0),t.error?a("div",{staticStyle:{"text-align":"center"}},[t._m(1)]):t._e(),a("div",{staticClass:"form-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t._data.email,expression:"_data.email"}],staticClass:"form-control",attrs:{autofocus:"",type:"email"},domProps:{value:t._data.email},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.singIn(e)},input:function(e){e.target.composing||t.$set(t._data,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t._data.password,expression:"_data.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t._data.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.singIn(e)},input:function(e){e.target.composing||t.$set(t._data,"password",e.target.value)}}})]),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn btn-info pl-5 pr-5",staticStyle:{"background-color":"#27146e","border-radius":"10px","border-color":"transparent"},attrs:{type:"button"},on:{click:t.singIn}},[t._v("Iniciar sesión")])]),t._m(4)])])])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-center pb-4"},[a("img",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{src:"assets/images/LOGO MORADO.png",alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",{staticClass:"form-text text-danger mb-3",attrs:{id:"emailHelp"}},[a("strong",[t._v("El email o la contraseña son incorrectos.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"text-dark"},[a("strong",[t._v("Correo electrónico")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"text-dark"},[a("strong",[t._v("Contraseña")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group text-center"},[a("a",{staticClass:"input-font",staticStyle:{color:"black"},attrs:{href:"http://pgc.c-230.com/password/reset"}},[a("strong",[t._v("¿Olvidaste tu contraseña?")])])])}];b.a.defaults.baseURL=_.api.domain;var Ft=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.error=!1,t.API_Domain=_.api.domain,t}return Object(c["a"])(a,[{key:"singIn",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this["$store"].dispatch("login",this._data);case 3:this["$router"].replace("/use-policy"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("hay un error"),this.error=!0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._data.email="",this._data.password="";case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(h["d"]);Ft=Object(d["a"])([h["a"]],Ft);var Bt=Ft,Lt=Bt,Ht=(a("fcb0"),Object(S["a"])(Lt,$t,zt,!1,null,null,null)),Ut=Ht.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card"},[a("h1",{staticClass:"title-home"},[t._v("Política de uso de TimeWorks")]),a("div",{staticClass:"card-body card-shadow"},[a("p",{staticClass:"paragraphs"},[t._v(" TimeWorks es una herramienta para la gestión del tiempo dedicado por el personal (tiempo completo o parcial) de C230 Consultores y Fundación IDEA en actividades relacionadas al cumplimiento de sus responsabilidades como parte de dichas organizaciones. ")]),a("p",{staticClass:"paragraphs"},[t._v(' Para el uso de TimeWorks es imprescindible que el personal cumpla con la "Política de Registro de Tiempos”, la cual se encuentra disponible también en la Plataforma de Gestión del Conocimiento (http://pgc.c-230.com/), así como otras directrices internas administrativas y, de ser el caso, de proyectos específicos. ')]),a("p",{staticClass:"paragraphs"},[t._v(' TimeWorks facilita la consolidación de los registros de tiempos realizados por el personal en sus Google Calendar vinculados a sus cuentas oficiales de las organizaciones. Para los registros de tiempos, el personal tendrá como referencia el "Catálogo de Códigos", el cual incluye códigos para todo tipo de actividades (proyectos, actividades generales, días inhábiles, entre otros). ')]),a("p",{staticClass:"paragraphs"},[t._v(" Para mayor información sobre las características funcionales de TimeWorks, referirse al “Manual de Uso de TimeWorks”, el cual se encuentra también disponible en la Plataforma de Gestión del Conocimiento. ")]),a("div",{staticClass:"custom-control form-control-lg custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.check,expression:"check"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.check)?t._i(t.check,null)>-1:t.check},on:{change:[function(e){var a=t.check,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.check=a.concat([n])):i>-1&&(t.check=a.slice(0,i).concat(a.slice(i+1)))}else t.check=r},function(e){return t.checkClick()}]}}),a("label",{staticClass:"custom-control-label",attrs:{for:"exampleCheck1"}},[t._v("He leído la Política de uso de TimeWorks y acepto las consideraciones ahí contenidas")])])])])])]),t._m(0)])},qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center mt-4"},[a("div",{staticClass:"col-md-3 col-lg-6 col-xl-3"},[a("a",{staticClass:"btn btn-block btn-outline-primary mb-2",staticStyle:{"white-space":"normal"},attrs:{href:"/pdf/politica_registro.pdf",target:"_blank"}},[t._v(" Política de Registro de Tiempos ")])]),a("div",{staticClass:"col-md-3 col-lg-6 col-xl-3"},[a("a",{staticClass:"btn btn-block btn-outline-primary mb-2",staticStyle:{"white-space":"normal"},attrs:{href:" https://docs.google.com/spreadsheets/d/1JVyopkCjXnaiFEgrb1T7Y6cnyrFC5NqY06X-2-012Mc/edit?usp=sharing",target:"_blank"}},[t._v(" Catálogo de Códigos ")])]),a("div",{staticClass:"col-md-3 col-lg-6 col-xl-3"},[a("a",{staticClass:"btn btn-block btn-outline-primary mb-2",staticStyle:{"white-space":"normal"},attrs:{href:"/pdf/Manual de uso TimeWorks- Junio 2021.pdf",target:"_blank"}},[t._v(" Manual de Uso de TimeWorks ")])])])}],Gt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.check=!1,t}return Object(c["a"])(a,[{key:"mounted",value:function(){this.check=this.$store.state.agreedToPrivacy}},{key:"checkClick",value:function(){this.$store.commit("ACCEPT_PRIVACY",this.check)}}]),a}(h["d"]);Gt=Object(d["a"])([h["a"]],Gt);var Jt=Gt,Qt=Jt,Vt=Object(S["a"])(Qt,Wt,qt,!1,null,"2381a712",null),Kt=Vt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card"},[a("h1",{staticClass:"title-home"},[t._v("Consulta de registros cerrados")]),a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-block btn-light",on:{click:t.goToQueryChart}},[t._v("Gráfica")])])]),a("div",{staticClass:"card-body card-shadow mt-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mt-2"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"",placeholder:"Seleccione una actividad"},on:{change:t.projectChange}},[a("a-select-option",{attrs:{value:""}},[t._v(" Todas las actividades ")]),t._l(t.projects,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.project)+" ")])})),t._v(" template ")],2)],1),a("div",{staticClass:"col-md-6 mt-2 justify-content-center text-center"},[a("a-range-picker",{on:{change:t.dateRange}})],1)]),a("div",{staticClass:"row p-4"},[a("table",{staticClass:"table table-responsive"},[t._m(1),a("tbody",[t._l(t.dataProcessed,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.project))]),a("td",[t._v(t._s(e.detail))]),a("td",[t._v(t._s(e.dateStart))]),a("td",[t._v(t._s(e.dateEnd))]),a("td",[t._v(t._s(e.hours))])])})),a("tr",[a("td",{attrs:{colspan:"5"}}),a("td",{staticStyle:{"text-align":"center","font-size":"1.2em","font-weight":"bold"}},[t._v("Total : "+t._s(t.total)+" hrs.")])])],2)])]),t.dataProcessed.length?a("div",{staticClass:"row mt-2"},[a("button",{staticClass:"btn btn-success",on:{click:t.dataExport}},[t._v(" Exportar ")])]):t._e()])])])])])},Zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-block btn-warning"},[t._v("Tabla")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Código de la actividad")]),a("th",{attrs:{scope:"col"}},[t._v("Detalle")]),a("th",{attrs:{scope:"col"}},[t._v("Inicio")]),a("th",{attrs:{scope:"col"}},[t._v("Fin")]),a("th",{attrs:{scope:"col"}},[t._v("Tiempo registrado (horas)")])])])}],te=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.projects=[],t.date=null,t.dataProcessed=[],t.projectSelected=null,t.total=0,t.isLoading=!1,t.startDate=null,t.endDate=null,t}return Object(c["a"])(a,[{key:"created",value:function(){this.getUniquesProjects()}},{key:"getUniquesProjects",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/project-list");case 2:e=t.sent,this.projects=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"projectChange",value:function(t){this.projectSelected="number"===typeof t?this.projects[t].project:null,this.getData()}},{key:"dateRange",value:function(t){if(t.length<=0)return!0;this.startDate=ft()(t[0]._d).format("YYYY-MM-DD"),this.endDate=ft()(t[1]._d).format("YYYY-MM-DD"),this.getData()}},{key:"getData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.startDate||null!=this.endDate){t.next=2;break}return t.abrupt("return",!0);case 2:return this.isLoading=!0,t.next=5,b.a.post("/api/projects-registers-user-list",{start:this.startDate,end:this.endDate,project:this.projectSelected});case 5:e=t.sent,this.isLoading=!1,this.total=e.data.total,this.dataProcessed=e.data.rows;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goToQueryChart",value:function(){this["$router"].replace("/query-user-chart")}},{key:"dataExport",value:function(){var t=["project","detail","dateStart","dateEnd","hours"],e=pt.a.utils.json_to_sheet(this.dataProcessed,{header:t});e["A1"].v="Proyecto",e["B1"].v="Detalle",e["C1"].v="Inicio",e["D1"].v="Fin",e["E1"].v="Horas";var a=pt.a.utils.book_new(),s="events_exports";pt.a.utils.book_append_sheet(a,e,s),pt.a.writeFile(a,"".concat(s,".xlsx"))}}]),a}(h["d"]);te=Object(d["a"])([h["a"]],te);var ee=te,ae=ee,se=Object(S["a"])(ae,Xt,Zt,!1,null,"d0be57bc",null),re=se.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card"},[a("h1",{staticClass:"title-home"},[t._v("Consulta de registros previos")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-block btn-light",on:{click:t.goToQueryTable}},[t._v("Tabla")])]),t._m(0)]),a("div",{staticClass:"card-body card-shadow mt-4"},[a("div",{staticClass:"row pa-4 mb-4"},[a("div",{staticClass:"col-md-6 mt-2"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"",placeholder:"Selecciona una actividad"},on:{change:t.projectChange}},[a("a-select-option",{attrs:{value:""}},[t._v(" Todas las actividades ")]),t._l(t.projects,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.project)+" ")])})),t._v(" template ")],2)],1),a("div",{staticClass:"col-md-6 mt-2 justify-content-center text-center"},[a("a-range-picker",{on:{change:t.dateRange}})],1)]),a("highcharts",{directives:[{name:"show",rawName:"v-show",value:t.categories.length,expression:"categories.length"}],ref:"chart",attrs:{options:t.chartOptions}})],1)])])])])},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-block btn-warning"},[t._v("Gráfica")])])}],oe=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.projects=[],t.projectSelected=null,t.isLoading=!1,t.startDate=null,t.endDate=null,t.categories=[],t.series=[],t}return Object(c["a"])(a,[{key:"goToQueryTable",value:function(){this["$router"].replace("/query-user")}},{key:"created",value:function(){this.getUniquesProjects()}},{key:"getUniquesProjects",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/project-list");case 2:e=t.sent,this.projects=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"dateRange",value:function(t){if(t.length<=0)return!0;this.startDate=ft()(t[0]._d).format("YYYY-MM-DD"),this.endDate=ft()(t[1]._d).format("YYYY-MM-DD"),this.getData()}},{key:"projectChange",value:function(t){this.projectSelected="number"===typeof t?this.projects[t].project:null,this.getData()}},{key:"getData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.startDate||null!=this.endDate){t.next=2;break}return t.abrupt("return",!0);case 2:return this.isLoading=!0,t.next=5,b.a.post("/api/projects-registers-user-chart",{start:this.startDate,end:this.endDate,project:this.projectSelected});case 5:e=t.sent,this.isLoading=!1,this.categories=e.data.categories,this.series=[{name:e.data.name,data:e.data.series.map((function(t){return parseFloat(t)}))}],console.log(this.categories),console.log(this.series);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"chartOptions",get:function(){var t={chart:{type:"bar"},title:{text:"Horas registradas por actividad"},xAxis:{categories:this.categories},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},colors:["#5bd2a6"],minHeight:500,series:this.series};return t}}]),a}(h["d"]);oe=Object(d["a"])([h["a"]],oe);var ce=oe,le=ce,ue=Object(S["a"])(le,ne,ie,!1,null,"65d05594",null),de=ue.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card"},[a("h1",{staticClass:"title-home"},[t._v("Administración")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("a",{staticClass:"btn btn-block btn-custom-warning",on:{click:function(e){return t.setType(t.types.users)}}},[t._v("Registros por colaborador")])]),a("div",{staticClass:"col-md-3"},[a("a",{staticClass:"btn btn-block btn-custom-warning",on:{click:function(e){return t.setType(t.types.projects)}}},[t._v("Registros por actividad")])]),a("div",{staticClass:"col-md-3"},[a("a",{staticClass:"btn btn-block btn-custom-warning",on:{click:function(e){return t.setType(t.types.general)}}},[t._v("Registros generales")])]),a("div",{staticClass:"col-md-3"},[a("a",{staticClass:"btn btn-block btn-custom-warning",on:{click:function(e){return t.setType(t.types.reports)}}},[t._v("Reportes")])])]),a("div",{staticClass:"card-body card-shadow mt-4"},[t.type===t.types.general?a("general-registers"):t._e(),t.type===t.types.projects?a("project-registers"):t._e(),t.type===t.types.users?a("users-registers"):t._e(),t.type===t.types.reports?a("reports-register"):t._e()],1)])])])])},he=[],ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-md-5 text-right",staticStyle:{"border-bottom":"1px solid #F5B133"}},[a("a-range-picker",{on:{change:t.dateRangeSelected}})],1)]),a("div",{staticClass:"row"},[t.isLoading?a("rotate-square2"):t._e()],1),a("highcharts",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],ref:"chart",attrs:{id:"myChart",options:t.chartOptions}}),t.data.length?a("div",{staticClass:"row mt-2 p-3"},[a("div",{staticClass:"row p-3"},[a("button",{staticClass:"btn btn-success",on:{click:t.exportToExcel}},[t._v("Exportar")])]),a("table",{staticClass:"table table-bordered table-responsive"},[t._m(1),t._l(t.data,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.colaborador))]),a("td",[t._v(t._s(e.cargo))]),a("td",[t._v(t._s(e.codigo_proyecto))]),a("td",[t._v(t._s(e.descripcion))]),a("td",[t._v(t._s(e.tiempo_estimado))])])}))],2)]):t._e()],1)},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-7"},[a("h6",{staticClass:"text-muted"},[t._v("Registros generales")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("#")]),a("th",[t._v("Colaborador")]),a("th",[t._v("Cargo")]),a("th",[t._v("Código del proyecto")]),a("th",[t._v("Descripción")]),a("th",{staticClass:"text-center"},[t._v("Tiempo destinado "),a("br"),t._v("(horas)")])])}],fe=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.data=[],t.startDate="",t.endDate="",t.isLoading=!1,t.series=[],t.projects=[],t}return Object(c["a"])(a,[{key:"dateRangeSelected",value:function(t){t.length&&(this.startDate=ft()(t[0]._d).format("YYYY-MM-DD"),this.endDate=ft()(t[1]._d).format("YYYY-MM-DD"),this.getRegistersByDateRange(this.startDate,this.endDate))}},{key:"getRegistersByDateRange",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.data=[],this.isLoading=!0,t.next=5,b.a.post("/api/general-registers-list",{start:e,end:a});case 5:return s=t.sent,this.data=s.data.result,t.next=9,b.a.post("/api/general-registers-chart",{start:e,end:a});case 9:r=t.sent,this.projects=r.data.projects,this.series=r.data.series,this.isLoading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0),this.isLoading=!1;case 19:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"exportToExcel",value:function(){var t=["colaborador","cargo","codigo_proyecto","descripcion","tiempo_estimado"],e=pt.a.utils.json_to_sheet(this.data,{header:t});e["A1"].v="Colaborador",e["B1"].v="Cargo",e["C1"].v="Código del Proyecto",e["D1"].v="Descripción",e["E1"].v="Tiempo Estimado (hrs)";var a=pt.a.utils.book_new(),s="registros";pt.a.utils.book_append_sheet(a,e,s);var r="registros_generales_del_".concat(this.startDate,"_al_").concat(this.endDate,".xlsx");pt.a.writeFile(a,r)}},{key:"chartOptions",get:function(){return{chart:{type:"bar"},title:{text:"Horas reportadas en el período, por colaborador y actividad"},xAxis:{categories:this.projects},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:this.series}}}]),a}(h["d"]);fe=Object(d["a"])([Object(h["a"])({components:{RotateSquare2:ct["a"]}})],fe);var ge=fe,be=ge,_e=(a("b936"),Object(S["a"])(be,ve,me,!1,null,"4f38b7d8",null)),ye=_e.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("h6",{staticClass:"text-muted"},[t._v("Registros por colaborador")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"Selecciona un colaborador",placeholder:"Selecciona un proyecto"},on:{change:t.userChange}},[a("a-select-option",{attrs:{value:""}},[t._v(" Todos los colaboradores ")]),t._l(t.users,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.name)+" ")])})),t._v(" template ")],2)],1)])]),a("div",{staticClass:"col-md-5 text-right",staticStyle:{"border-bottom":"1px solid #F5B133"}},[a("a-range-picker",{on:{change:t.dateRangeSelected}})],1)]),a("div",{staticClass:"row"},[t.isLoading?a("rotate-square2"):t._e()],1),a("highcharts",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],ref:"chart",attrs:{id:"myChart",options:t.chartOptions}}),t.data.length?a("div",{staticClass:"row mt-2 p-3"},[a("div",{staticClass:"row p-3"},[a("button",{staticClass:"btn btn-success",on:{click:t.exportToExcel}},[t._v("Exportar")])]),a("table",{staticClass:"table table-bordered table-responsive"},[t._m(0),t._l(t.data,(function(e,s){return a("tr",{key:s,class:{overlapping:e.overlapping}},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.colaborador))]),a("td",[t._v(t._s(e.cargo))]),a("td",[t._v(t._s(e.codigo_proyecto))]),a("td",[t._v(t._s(e.descripcion))]),a("td",[t._v(t._s(e.dateStart))]),a("td",[t._v(t._s(e.dateEnd))]),a("td",[t._v(t._s(e.tiempo_estimado))])])})),a("tr",[a("td",{staticClass:"text-right pr-4",attrs:{colspan:"8"}},[a("h5",[t._v("Total: "+t._s(t.total)+" Hrs")])])])],2)]):t._e()],1)},je=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("#")]),a("th",[t._v("Colaborador")]),a("th",[t._v("Posición")]),a("th",[t._v("Código de la actividad")]),a("th",[t._v("Descripción")]),a("th",[t._v("Inicio")]),a("th",[t._v("Fin")]),a("th",{staticClass:"text-center"},[t._v("Tiempo (horas)")])])}],Ce=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.isLoading=!1,t.isLoadingFormat=!1,t.series=[],t.categories=[],t.data=[],t.users=[],t.user=null,t.startDate=null,t.endDate=null,t.total=0,t.year=null,t.month=null,t.successReport=!1,t.errorReport=!1,t.path="",t}return Object(c["a"])(a,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/user-list");case 2:e=t.sent,this.users=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"generatePdf",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.user),e={startDate:this.startDate,endDate:this.endDate,userId:this.user.id},this.isLoadingFormat=!0,t.prev=3,t.next=6,b.a.post("/api/user-registers-report",e);case 6:a=t.sent,a.data.success?(this.path=a.data.path,this.successReport=!0,this.errorReport=!1):(this.path="",this.successReport=!1,this.errorReport=!0),this.isLoadingFormat=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),this.errorReport=!0,this.isLoadingFormat=!1;case 15:case"end":return t.stop()}}),t,this,[[3,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"userChange",value:function(t){this.user="number"===typeof t?this.users[t]:null,this.getRegistersByDateRange(this.startDate,this.endDate)}},{key:"dateRangeSelected",value:function(t){if(t.length){this.startDate=ft()(t[0]._d).format("YYYY-MM-DD"),this.endDate=ft()(t[1]._d).format("YYYY-MM-DD");var e=ft()(t[0]._d).month()+1;this.month=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),this.year=ft()(t[1]._d).year(),this.getRegistersByDateRange(this.startDate,this.endDate)}}},{key:"getRegistersByDateRange",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.user){t.next=2;break}return t.abrupt("return");case 2:if(null!=e||null!=a){t.next=4;break}return t.abrupt("return");case 4:return this.path="",this.successReport=!1,this.errorReport=!1,t.prev=7,this.data=[],this.isLoading=!0,t.next=12,b.a.post("/api/user-registers-list",{start:e,end:a,user_id:this.user.id});case 12:return s=t.sent,this.total=s.data.total,this.checkIfThereAreRegisterInTheSameTime(s.data.data),t.next=17,b.a.post("/api/user-registers-chart",{start:e,end:a,user_id:this.user.id});case 17:r=t.sent,this.categories=r.data.categories,this.series=r.data.series,console.log(r),this.isLoading=!1,t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](7),console.log(t.t0),this.isLoading=!1;case 28:case"end":return t.stop()}}),t,this,[[7,24]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"checkIfThereAreRegisterInTheSameTime",value:function(t){var e=t.map((function(e){var a=ft()(e.dateStart),s=ft()(e.dateEnd),r=t.find((function(t){var e=ft()(t.dateStart),r=ft()(t.dateEnd);return a.isBetween(e,r)||s.isBetween(e,r)}));return e.overlapping=!!r,e}));this.data=e}},{key:"exportToExcel",value:function(){var t=["colaborador","cargo","codigo_proyecto","descripcion","dateStart","dateEnd","tiempo_estimado"],e=pt.a.utils.json_to_sheet(this.data,{header:t});e["A1"].v="Colaborador",e["B1"].v="Cargo",e["C1"].v="Código del Proyecto",e["D1"].v="Descripción",e["E1"].v="Inicio",e["F1"].v="Fin",e["G1"].v="Tiempo Estimado (hrs)";var a=this.user.name.replace(/ /g,"_"),s=pt.a.utils.book_new(),r="registros";pt.a.utils.book_append_sheet(s,e,r);var n="".concat(this.year,"_").concat(this.month,"_").concat(a,".xlsx");pt.a.writeFile(s,n)}},{key:"chartOptions",get:function(){return{chart:{type:"bar"},title:{text:"Distribución del tiempo reportado, por actividad"},xAxis:{categories:this.categories},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[this.series]}}}]),a}(h["d"]);Ce=Object(d["a"])([Object(h["a"])({components:{RotateSquare2:ct["a"]}})],Ce);var we=Ce,xe=we,Oe=(a("e76c"),Object(S["a"])(xe,ke,je,!1,null,"3d7c2b19",null)),Se=Oe.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("h6",{staticClass:"text-muted"},[t._v("Registros por actividad ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"Selecciona un proyecto",placeholder:"Selecciona una actividad"},on:{change:t.selectChange}},[a("a-select-option",{attrs:{value:""}},[t._v(" Todas las actividades ")]),t._l(t.projects,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.project)+" ")])})),t._v(" template ")],2)],1)])]),a("div",{staticClass:"col-md-5 text-right",staticStyle:{"border-bottom":"1px solid #F5B133"}},[a("a-range-picker",{on:{change:t.dateRangeSelected}})],1)]),a("div",{staticClass:"row"},[t.isLoading?a("rotate-square2"):t._e()],1),a("highcharts",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],ref:"chart",attrs:{id:"myChart",options:t.chartOptions}}),t.data.length?a("div",{staticClass:"row mt-2 p-3"},[a("div",{staticClass:"row p-3"},[a("button",{staticClass:"btn btn-success",on:{click:t.exportToExcel}},[t._v("Exportar")])]),a("table",{staticClass:"table table-bordered table-responsive"},[t._m(0),t._l(t.data,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.project))]),a("td",[t._v(t._s(e.hours))])])}))],2)]):t._e()],1)},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("#")]),a("th",[t._v("Colaborador")]),a("th",[t._v("Código de la actividad")]),a("th",{staticClass:"text-center"},[t._v("Tiempo (horas)")])])}],Ee=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.isLoading=!1,t.series=[],t.data=[],t.projects=[],t.project=null,t.startDate=null,t.endDate=null,t}return Object(c["a"])(a,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/project-list-full");case 2:e=t.sent,console.log(e),this.projects=e.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectChange",value:function(t){this.project="number"===typeof t?this.projects[t]:null,this.getRegistersByProject(this.startDate,this.endDate)}},{key:"dateRangeSelected",value:function(t){t.length&&(this.startDate=ft()(t[0]._d).format("YYYY-MM-DD"),this.endDate=ft()(t[1]._d).format("YYYY-MM-DD"),this.getRegistersByProject(this.startDate,this.endDate))}},{key:"getRegistersByProject",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.project){t.next=2;break}return t.abrupt("return");case 2:if(null!=e||null!=a){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,this.data=[],this.isLoading=!0,t.next=9,b.a.post("/api/project-registers-list",{start:e,end:a,project:this.project.project});case 9:s=t.sent,this.data=s.data,r=[],this.data.forEach((function(t){r.push({name:t.name,y:Number(t.hours)})})),console.log(r),this.series=r,this.isLoading=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](4),console.log(t.t0),this.isLoading=!1;case 22:case"end":return t.stop()}}),t,this,[[4,18]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"exportToExcel",value:function(){var t=["name","project","hours"],e=pt.a.utils.json_to_sheet(this.data,{header:t});e["A1"].v="Colaborador",e["B1"].v="Código del Proyecto",e["C1"].v="Tiempo Estimado (hrs)";var a=pt.a.utils.book_new(),s="registros";pt.a.utils.book_append_sheet(a,e,s);var r="registros_por_proyecto_del_".concat(this.startDate,"_al_").concat(this.endDate,".xlsx");pt.a.writeFile(a,r)}},{key:"chartOptions",get:function(){return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Distribución del tiempo reportado, por colaborador"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Horas",colorByPoint:!0,data:this.series}]}}}]),a}(h["d"]);Ee=Object(d["a"])([Object(h["a"])({components:{RotateSquare2:ct["a"]}})],Ee);var Te=Ee,Pe=Te,Me=(a("5219"),Object(S["a"])(Pe,Re,De,!1,null,"5ba6f35d",null)),Ye=Me.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("h6",{staticClass:"text-muted"},[t._v("Seleccione un colaborador y un año")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"Selecciona un colaborador",placeholder:"Selecciona un proyecto"},on:{change:t.userChange}},[t._l(t.users,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.name)+" ")])})),t._v(" template ")],2)],1),a("div",{staticClass:"col-md-6"},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":t.yearNow},on:{change:t.yearChange}},t._l(t.yearRange,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e)+" ")])})),1)],1)]),a("div",{staticClass:"row mt-4 text-center"},[a("table",{staticClass:"table table-bordered table-responsive"},[t._m(0),a("tbody",t._l(t.data,(function(e){return a("tr",{key:e.id},[a("td",{domProps:{textContent:t._s(t.getMonthName(e.month_number))}}),a("td",[e.path?a("a",{attrs:{target:"_blank",href:e.path}},[a("img",{staticStyle:{width:"28px",cursor:"pointer"},attrs:{src:"/images/icons8-pdf-40.png",alt:""}})]):t._e()])])})),0)])])])])},Ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Fecha")]),a("th",[t._v("Archivo")])])])}],Ne=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.yearNow=(new Date).getFullYear(),t.yearRange=[],t.users=[],t.user=null,t.data=[],t}return Object(c["a"])(a,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=this.yearNow-5;e<=this.yearNow;e++)this.yearRange.unshift(e);return t.next=3,b.a.post("/api/user-list");case 3:a=t.sent,this.users=a.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"yearChange",value:function(t){this.yearNow=this.yearRange[t],this.getReportsUploaded()}},{key:"userChange",value:function(t){this.user="number"===typeof t?this.users[t]:null,this.getReportsUploaded()}},{key:"getReportsUploaded",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.user){t.next=2;break}return t.abrupt("return");case 2:return console.log(this.user),t.prev=3,t.next=6,b.a.post("/api/files-reporters",{year:this.yearNow,userId:this.user.id});case 6:e=t.sent,this.data=e.data,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[3,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getMonthName",value:function(t){var e={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"};return e[Number(t)]}}]),a}(h["d"]);Ne=Object(d["a"])([h["a"]],Ne);var $e=Ne,ze=$e,Fe=Object(S["a"])(ze,Ae,Ie,!1,null,"603c686e",null),Be=Fe.exports,Le=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.types={general:"general",users:"users",projects:"projects",reports:"reports"},t.type=t.types.users,t}return Object(c["a"])(a,[{key:"setType",value:function(t){this.type=t}}]),a}(h["d"]);Le=Object(d["a"])([Object(h["a"])({components:{ReportsRegister:Be,ProjectRegisters:Ye,GeneralRegisters:ye,UsersRegisters:Se}})],Le);var He=Le,Ue=He,We=(a("bf3b"),Object(S["a"])(Ue,pe,he,!1,null,"3571dafa",null)),qe=We.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"row"},[a("month-picker-input",{attrs:{"input-pre-filled":!0,"default-month":t.month,"default-year":t.year,lang:"es"},on:{change:t.showDate}})],1),a("div",{staticClass:"row mt-2"},[a("table",{staticClass:"table table-bordered"},[t._m(1),a("tbody",t._l(t.data,(function(e,s){return a("tr",{key:s},[a("th",[t._v(t._s(e.name))]),a("td",[a("img",{attrs:{src:t.getImageStatus(e.status),alt:""}}),t._v(" "+t._s(e.status))]),a("td",[t._v(t._s(e.version))]),a("td",[a("a",[t.data[s].loading?t._e():a("img",{attrs:{src:t.getImageDownload(e),alt:""},on:{click:function(e){return t.generateExcel(s)}}}),t.data[s].loading?a("rotate-square2",{attrs:{size:"20px"}}):t._e()],1)]),a("td",[a("a",[t.data[s].loading?t._e():a("img",{attrs:{src:t.getImageDownload(e),alt:""},on:{click:function(e){return t.generatePdf(s)}}}),t.data[s].loading?a("rotate-square2",{attrs:{size:"20px"}}):t._e()],1)]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data[s].finished,expression:"data[index].finished"}],attrs:{type:"checkbox",disabled:0==e.version},domProps:{checked:Array.isArray(t.data[s].finished)?t._i(t.data[s].finished,null)>-1:t.data[s].finished},on:{change:[function(e){var a=t.data[s].finished,r=e.target,n=!!r.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);r.checked?o<0&&t.$set(t.data[s],"finished",a.concat([i])):o>-1&&t.$set(t.data[s],"finished",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.data[s],"finished",n)},function(e){return t.markAsFinished(s)}]}})]),a("td",[t.data[s].activityId?a("img",{staticStyle:{width:"28px",cursor:"pointer"},attrs:{src:"/images/icons8-upload-48.png",alt:""},on:{click:function(a){return t.openModalForUploadFile(e)}}}):t._e(),e.path?a("a",{attrs:{target:"_blank",href:e.path}},[a("img",{staticStyle:{width:"28px",cursor:"pointer"},attrs:{src:"/images/icons8-pdf-40.png",alt:""}})]):t._e()])])})),0)])])])])]),a("a-modal",{attrs:{title:"Subir archivo"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("template",{slot:"footer"},[t.loading?t._e():a("button",{staticClass:"btn btn-warning",on:{click:function(e){t.showModal=!1}}},[t._v(" Cancelar ")]),t.loading?t._e():a("button",{staticClass:"btn btn-success",attrs:{loading:t.loading},on:{click:t.uploadFile}},[t._v(" Guardar ")]),t.loading?a("rotate-square2",{attrs:{size:"20px"}}):t._e()],1),a("label",[a("input",{ref:"file",attrs:{accept:"application/pdf",type:"file"},on:{change:function(e){return t.handleFileUpload(e)}}})])],2)],1)},Je=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"title-home"},[t._v("Generación de reportes")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{"background-color":"rgb(242, 246, 248)"}},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Nombre del colaborador")]),a("th",{attrs:{scope:"col"}},[t._v("Estatus de reporte")]),a("th",{attrs:{scope:"col"}},[t._v("Número de versión")]),a("th",{attrs:{scope:"col"}},[t._v("Excel")]),a("th",{attrs:{scope:"col"}},[t._v("PDF")]),a("th",{attrs:{scope:"col"}},[t._v("Marcar como finalizado")]),a("th",{attrs:{scope:"col"}},[t._v("Archivo")])])])}],Qe=a("7b25"),Ve=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.month=ft()().month()+1,t.year=ft()().year(),t.data=[],t.showModal=!1,t.item=null,t.file=null,t.loading=!1,t}return Object(c["a"])(a,[{key:"created",value:function(){}},{key:"showDate",value:function(t){this.year=t.year,this.month=t.monthIndex,this.getUsersReports()}},{key:"openModalForUploadFile",value:function(t){this.item=t,this.showModal=!0}},{key:"handleFileUpload",value:function(t){this.file=t.target.files[0]}},{key:"uploadFile",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,null!=this.file){t.next=4;break}return this.showModal=!1,t.abrupt("return");case 4:return e=new FormData,e.append("file",this.file),e.append("activity_id",this.item.activityId),t.next=9,b.a.post("/api/upload-report-user",e,{headers:{"Content-Type":"multipart/form-data"}});case 9:return a=t.sent,console.log(a),this.loading=!1,this.showModal=!1,t.next=15,this.getUsersReports();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUsersReports",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/reports-generation-monthly",{month:this.month,year:this.year});case 2:e=t.sent,console.log(e),this.data=e.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"markAsFinished",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.data[e].status=this.data[e].finished?"Finalizado":"Enviado",a={activityId:this.data[e].activityId,userId:this.data[e].id,finished:this.data[e].finished},t.next=4,b.a.post("/api/reports-generation-finished",a);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"generateExcel",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={month:this.month,year:this.year,userId:this.data[e].id},this.data[e].loading=!0,t.prev=2,t.next=5,b.a.post("/api/reports-generation-list",a);case 5:s=t.sent,this.data[e].loading=!1,r=this.data[e].name.replace(/ /g,"_"),this.createExcel(s.data.data,r),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),this.data[e].loading=!1,console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,this,[[2,11]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createExcel",value:function(t,e){console.log("crear excel"),console.log(t);var a=["colaborador","cargo","codigo_proyecto","descripcion","dateStart","dateEnd","tiempo_estimado"],s=pt.a.utils.json_to_sheet(t,{header:a});s["A1"].v="Colaborador",s["B1"].v="Cargo",s["C1"].v="Código del Proyecto",s["D1"].v="Descripción",s["E1"].v="Inicio",s["F1"].v="Fin",s["G1"].v="Tiempo Estimado (hrs)";var r=pt.a.utils.book_new(),n="registros",i=this.month.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});pt.a.utils.book_append_sheet(r,s,n);var o="".concat(this.year,"_").concat(i,"_").concat(e,".xlsx");pt.a.writeFile(r,o)}},{key:"generatePdf",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={month:this.month,year:this.year,userId:this.data[e].id},this.data[e].loading=!0,t.prev=2,t.next=5,b.a.post("/api/user-registers-report",a);case 5:s=t.sent,this.data[e].loading=!1,s.data.success?window.open(s.data.path,"_blank"):(r=k["a"].error,r({title:"No se ha podido generar el pdf correctamente",content:"",okText:"Aceptar"})),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),this.data[e].loading=!1,n=k["a"].error,n({title:"No se ha podido generar el pdf correctamente",content:"",okText:"Aceptar"});case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getImageDownload",value:function(t){return 0==t.version?"/images/descargar_inactivo.png":"/images/descargar_activo.png"}},{key:"getImageStatus",value:function(t){switch(t){case"Pendiente":return"/images/reporte_pendiente.png";case"Enviado":return"/images/reporte_enviado.png";case"Finalizado":return"/images/reporte_finalizado.png"}return"/images/reporte_pendiente.png"}}]),a}(h["d"]);Ve=Object(d["a"])([Object(h["a"])({components:{MonthPickerInput:Qe["a"],RotateSquare2:ct["a"]}})],Ve);var Ke=Ve,Xe=Ke,Ze=(a("7da1"),Object(S["a"])(Xe,Ge,Je,!1,null,null,null)),ta=Ze.exports;s["default"].use(st["a"]);var ea=[{path:"*",redirect:"/login"},{path:"/use-policy",name:"UsePolicy",component:Kt,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/home",name:"Home",component:Nt,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/query-user",name:"QueryUser",component:re,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/query-user-chart",name:"QueryUserChart",component:de,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/monthly-report-user",name:"MonthlyReportUser",component:kt,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/administration",name:"Administration",component:qe,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/reports-generation",name:"ReportsGeneration",component:ta,beforeEnter:function(t,e,a){y.dispatch("getUser").then((function(){var t=y.state.auth;t?a():a("/login")}))}},{path:"/login",name:"Login",component:Ut}],aa=new st["a"]({mode:"history",base:"/",routes:ea}),sa=aa,ra=a("ea7f"),na=a.n(ra),ia=a("67d5"),oa=a.n(ia),ca=a("0bb7"),la=a("9839"),ua=a("4df5"),da=(a("202f"),a("0319")),pa=a.n(da),ha=a("5886");a("4413");pa()(na.a),s["default"].use(xt.a),s["default"].use(ca["a"]),s["default"].use(k["a"]),s["default"].use(la["a"]),s["default"].use(ua["b"]),s["default"].use(ha["a"]),oa()(na.a),s["default"].config.productionTip=!1,b.a.interceptors.request.use((function(t){return t.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("acess_token")),"Content-Type":"application/json",Accept:"application/json"},t})),new s["default"]({router:sa,store:y,render:function(t){return t(at)}}).$mount("#app")},cded:function(t,e,a){},e309:function(t,e,a){"use strict";var s=a("c7a2"),r=a.n(s);r.a},e76c:function(t,e,a){"use strict";var s=a("cded"),r=a.n(s);r.a},f8ac:function(t,e,a){},fcb0:function(t,e,a){"use strict";var s=a("f8ac"),r=a.n(s);r.a}});
//# sourceMappingURL=app.ca4f1b82.js.map